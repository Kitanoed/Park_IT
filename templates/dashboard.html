{% extends "base.html" %}
{% load static %}

{% block title %}Admin - Dashboard{% endblock %}

{% block content %}
<div class="pm-app">
  <!-- Top frame bar -->
  <div class="pm-frame"></div>

  <aside class="pm-sidebar">
    <div class="pm-brand">
      <div class="pm-brand-mark">
        <span class="dot red"></span>
        <span class="dot amber"></span>
        <span class="dot green"></span>
      </div>
      <div class="pm-logo">
        <span class="pk">Parking</span>
        <span class="mg">Manager</span>
      </div>
    </div>

    <nav class="pm-nav">
      <a class="pm-nav-item active" href="#">
        <span class="pm-icon">&#xE871;</span>
        <span>Dashboard</span>
      </a>
      <a class="pm-nav-item" href="#">
        <span class="pm-icon">&#xE531;</span>
        <span>Parking Spaces</span>
      </a>
      <a class="pm-nav-item" href="#">
        <span class="pm-icon">&#xE7FB;</span>
        <span>Manage Users</span>
      </a>
    </nav>

    <div class="pm-user">
      <div class="pm-avatar"></div>
      <div class="pm-user-meta">
        <div class="pm-user-name">Admin Name</div>
        <div class="pm-user-email">admin email</div>
      </div>
    </div>
  </aside>

  <main class="pm-main">
    <div class="pm-grid">
      <!-- Parking Lot Status -->
      <section class="pm-card span-2">
        <div class="pm-card-head">
          <h3>Parking Lot Status</h3>
          <div class="pm-legend">
            <span class="legend red">Occupied</span>
            <span class="legend green">Available</span>
          </div>
        </div>
        <div class="pm-list">
          {% for lot,label_total,occ,free,percent in
            [
              ('NGE',72,40,32,70),
              ('ACAD',72,50,22,90),
              ('BC',72,26,46,64),
              ('GYM',72,65,7,90),
              ('RTL',72,67,5,93),
              ('BG',72,58,14,80)
            ] %}
          <div class="pm-row">
            <div class="lot-name">{{ lot }}</div>
            <div class="bar">
              <div class="bar-occ" style="width: {{ percent }}%"></div>
              <div class="bar-free"></div>
            </div>
            <div class="lot-meta">
              <span class="meta">Total {{ label_total }}</span>
            </div>
          </div>
          {% endfor %}
        </div>
      </section>

      <!-- Entries today -->
      <section class="pm-card">
        <div class="pm-kpi">
          <div class="kpi-title">Total Entries for the Day</div>
          <div class="kpi-value">253</div>
        </div>
      </section>

      <!-- Exits today -->
      <section class="pm-card">
        <div class="pm-kpi">
          <div class="kpi-title">Total Exits for the Day</div>
          <div class="kpi-value">158</div>
        </div>
      </section>

      <!-- Total Current Occupancy -->
      <section class="pm-card">
        <div class="pm-card-head between">
          <h3>Total Current Occupancy</h3>
          <div class="pm-occp">90%</div>
        </div>
        <div class="pm-occupancy-list">
          {% for lot,perc in [('NGE',70),('ACAD',90),('BC',64),('GYM',90),('RTL',93),('BG',80)] %}
          <div class="occ-row">
            <div class="occ-name">{{ lot }}</div>
            <div class="occ-bar">
              <span class="occ-red" style="width: {{ perc }}%"></span>
              <span class="occ-green"></span>
            </div>
            <div class="occ-perc">{{ perc }}%</div>
          </div>
          {% endfor %}
        </div>
      </section>

      <!-- Peak Parking Times (weekly) -->
      <section class="pm-card span-3">
        <div class="pm-card-head">
          <h3>Peak Parking Times (weekly)</h3>
          <div class="pm-sub">10/05/2025 - 10/11/2025</div>
        </div>
        <div class="pm-bar-chart">
          <div class="bar-col">
            <div class="bar-rect h-378"></div>
            <div class="bar-label">Mon</div>
            <div class="bar-val">378</div>
          </div>
          <div class="bar-col">
            <div class="bar-rect h-436"></div>
            <div class="bar-label">Tue</div>
            <div class="bar-val">436</div>
          </div>
          <div class="bar-col">
            <div class="bar-rect h-256"></div>
            <div class="bar-label">Wed</div>
            <div class="bar-val">256</div>
          </div>
          <div class="bar-col">
            <div class="bar-rect h-558 primary"></div>
            <div class="bar-label">Thu</div>
            <div class="bar-val">558</div>
          </div>
          <div class="bar-col">
            <div class="bar-rect h-475"></div>
            <div class="bar-label">Fri</div>
            <div class="bar-val">475</div>
          </div>
          <div class="bar-col">
            <div class="bar-rect h-184"></div>
            <div class="bar-label">Sat</div>
            <div class="bar-val">184</div>
          </div>
          <div class="bar-col">
            <div class="bar-rect h-212"></div>
            <div class="bar-label">Sun</div>
            <div class="bar-val">212</div>
          </div>
        </div>
      </section>
    </div>
  </main>
</div>

<style>
/* Layout */
.pm-app{display:grid;grid-template-columns:260px 1fr;min-height:100vh;background:#0f1115}
.pm-frame{grid-column:1/3;height:24px;background:#1a1d24}
.pm-sidebar{background:#141820;color:#cfd3dc;display:flex;flex-direction:column;gap:24px;padding:20px 16px;border-right:1px solid #1f2430}
.pm-main{background:#0f1115;padding:20px 22px 28px 22px}
.pm-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:18px}
.span-2{grid-column:span 2}
.span-3{grid-column:span 4}

/* Brand */
.pm-brand-mark{display:flex;gap:8px;margin-bottom:16px}
.pm-brand-mark .dot{width:10px;height:10px;border-radius:50%}
.pm-brand-mark .red{background:#ff5f56}
.pm-brand-mark .amber{background:#ffbd2e}
.pm-brand-mark .green{background:#27c93f}
.pm-logo .pk{display:block;color:#f7b35e;font-weight:800;font-size:28px;line-height:22px}
.pm-logo .mg{display:block;color:#cfd3dc;font-weight:600;font-size:14px;margin-top:2px}

/* Nav */
.pm-nav{display:flex;flex-direction:column;gap:8px}
.pm-nav-item{display:flex;align-items:center;gap:12px;padding:12px 14px;border-radius:12px;color:#cfd3dc;background:linear-gradient(90deg,#702d12 0%, #b96a1e 100%);text-decoration:none}
.pm-nav-item:not(.active){background:transparent;border:1px solid #262b36}
.pm-nav-item.active{box-shadow:0 0 0 1px #a65b1d inset}
.pm-icon{font-family:'Material Icons Round', sans-serif;font-size:18px}

/* User */
.pm-user{margin-top:auto;display:flex;align-items:center;gap:12px;padding:10px;border:1px solid #262b36;border-radius:12px}
.pm-avatar{width:36px;height:36px;border-radius:50%;background:#2b3140}
.pm-user-name{color:#e7eaf1;font-weight:600}
.pm-user-email{color:#9aa3b2;font-size:12px}

/* Card */
.pm-card{background:#141820;border:1px solid #1f2430;border-radius:16px;padding:16px}
.pm-card-head{display:flex;align-items:center;gap:12px;margin-bottom:12px}
.pm-card-head.between{justify-content:space-between}
.pm-card h3{color:#e7eaf1;font-size:14px;font-weight:700;margin:0}
.pm-sub{color:#9aa3b2;font-size:12px}
.pm-legend{margin-left:auto;display:flex;gap:10px}
.pm-legend .legend{font-size:11px;color:#9aa3b2}
.pm-legend .red::before,.pm-legend .green::before{content:"";display:inline-block;width:8px;height:8px;border-radius:2px;margin-right:6px;vertical-align:middle}
.pm-legend .red::before{background:#e73838}
.pm-legend .green::before{background:#1ec071}

/* Status list */
.pm-list{display:flex;flex-direction:column;gap:12px}
.pm-row{display:grid;grid-template-columns:60px 1fr auto;gap:12px;align-items:center}
.lot-name{color:#cfd3dc;font-weight:700}
.bar{position:relative;height:10px;background:#232938;border-radius:999px;overflow:hidden}
.bar-occ{position:absolute;left:0;top:0;bottom:0;background:linear-gradient(90deg,#e73b2d,#f04f3a);border-right:1px solid rgba(0,0,0,.2)}
.bar-free{visibility:hidden}
.lot-meta .meta{color:#75809a;font-size:11px}

/* KPIs */
.pm-kpi .kpi-title{color:#9aa3b2;font-size:12px;margin-bottom:8px}
.pm-kpi .kpi-value{color:#e7eaf1;font-size:54px;font-weight:800;letter-spacing:1px}

/* Occupancy list */
.pm-occp{color:#e7eaf1;font-weight:800}
.pm-occupancy-list{display:flex;flex-direction:column;gap:10px}
.occ-row{display:grid;grid-template-columns:50px 1fr 40px;gap:10px;align-items:center}
.occ-name{color:#cfd3dc;font-weight:700}
.occ-bar{position:relative;height:10px;background:#232938;border-radius:999px;overflow:hidden}
.occ-red{position:absolute;height:100%;left:0;top:0;background:#e73838}
.occ-green{display:none}
.occ-perc{color:#9aa3b2;font-size:12px;text-align:right}

/* Bar chart */
.pm-bar-chart{display:grid;grid-template-columns:repeat(7,1fr);gap:16px;align-items:end;height:260px;margin-top:8px}
.bar-col{display:flex;flex-direction:column;align-items:center;gap:6px}
.bar-rect{width:56px;border-radius:12px 12px 6px 6px;background:linear-gradient(180deg,#c08956,#6b3b1f)}
.bar-rect.primary{background:linear-gradient(180deg,#f06a2f,#862b16)}
.bar-label{color:#9aa3b2;font-size:12px}
.bar-val{color:#cfd3dc;font-size:12px}

/* Bar heights (approximate to mock numbers) */
.h-558{height:220px}
.h-475{height:195px}
.h-436{height:180px}
.h-378{height:160px}
.h-256{height:120px}
.h-212{height:100px}
.h-184{height:90px}

/* Responsive */
@media (max-width: 1200px){
  .pm-grid{grid-template-columns:repeat(2,1fr)}
  .span-3{grid-column:span 2}
}
@media (max-width: 780px){
  .pm-app{grid-template-columns:1fr}
  .pm-sidebar{position:sticky;top:0;z-index:3}
  .pm-grid{grid-template-columns:1fr}
  .span-2,.span-3{grid-column:span 1}
}
</style>
{% endblock %}
